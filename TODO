Change size_t and long to int to avoid portability issue
Do the network part :)
